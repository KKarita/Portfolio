<!DOCTYPE html>
<html lang="fi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Harjoitus 4 - Puhelinluettelon käyttöliittymä</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="bg-dark text-white">
    <div class="container mt-4">
      <h2 class="text-center">Harjoitus 4 - Puhelinluettelon käyttöliittymä</h2>

      <p>
        Tässä tehtävässä toteutettiin HTML-pohjainen käyttöliittymä
        puhelinluettelolle.
      </p>

      <p>Haku -toiminnon script</p>
      <pre>
        <code>
        &lt;script&gt;
            $(document).ready(function () {
              $.getJSON(
                "http://a41d.k.time4vps.cloud:3001/henkilot",
                function (data) {
                  //Henkilölistan läpikäynti sekä tietojen lisääminen taulukkoon
                  $.each(data, function (key, person) {
                    $("#phoneTable").append(
                      "<tr><td>" +
                        person.name +
                        "</td><td>" +
                        person.phone +
                        "</td></tr>"
                    );
                  });
                }
              );
            });
        &lt;/script&gt;
        </code>
        </pre>
      <p>Taulukko -toiminnon script</p>
      <pre>
            <code>
                &lt;script&gt;
                $(document).ready(function () {
                    $('[name="submit"]').click(function () {
                      let name = $("#nimi").val(); //Haetaan käyttäjän syöttämä nimi
                      if (name === "") {
                        //Tarkistetaan onko syöte tyhjä
                        $("result").text("Virheellinen syöte!");
                        return;
                      }
            
                      //Lista henkilöistä
                      $.getJSON(
                        "http://a41d.k.time4vps.cloud:3001/henkilot",
                        function (data) {
                          //Etsitään nimeä
                          let found = data.find(
                            (person) => person.name.toLowercase() === name.toLowercase()
                          );
                          //Jos nimi löytyy, näytetään puhelinnumero.
                          if (found) {
                            $("#result").text("Puhelinnumero: " + found.phone);
                          } else {
                            $("#result").text("Numeroa ei löytynyt.");
                          }
                        }
                      );
                    });
                  });
                &lt;/script&gt;
            </code>
        </pre>

      <h2>Opitut asiat</h2>
      <p>
        Harjoitus opetti, kuinka jQuerylla voi hakea tietoa palvelimelta ja
        lisätä sitä HTML-taulukkoon.
      </p>

      <a href="index.html" class="btn btn-primary">Takaisin pääsivulle</a>
    </div>
  </body>
</html>
